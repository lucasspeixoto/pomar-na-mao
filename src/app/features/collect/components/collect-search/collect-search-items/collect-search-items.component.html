<section class="w-full h-full">
    @let collects =  filteredCollectData();

    @if(collects.length === 0) {
        <div class="mt-8 w-full flex flex-col justify-center items-center gap-4">
            <img class="w-1/3" src="assets/images/no-data.svg" alt="Sem resultados" />
            <span class="text-xl dark:text-slate-300 text-slate-800">Nenhum resultado.</span>
        </div>
    } @else {
        <span class="text-md sm:text-lg md:text-xl dark:text-slate-300 text-slate-800">Mostrando {{numberOfFilteredCollects()}} resultados</span>
        <div
        class="mx-1 mt-4 w-full min-h-[100px] gap-4 flex justify-between items-center flex-wrap ">
        @for(collect of collects; track collect.id) {
        <div
            style="box-shadow: 0px 6px 20px rgba(132,204,22,0.2);"
            class="cursor-pointer w-[150px] background rounded-lg p-1/2 sm:p-1 gap-1 bg-slate-300 dark:bg-slate-800">
            <div class="py-2 px-0 flex justify-between items-center">
                <span
                    class="label-medium text-surface-500 text-sm md:text-md">
                    #{{ collect.id.split("-")[0] }}...</span>
                @if(collect?.region) {
                <div
                    class="shadow-lg shadow-violet-500/50 inline-flex items-center justify-center rounded-full w-7 h-7 bg-violet-200 hover:bg-violet-300 transition-all duration-200 text-sm dark:bg-violet-800 dark:hover:bg-violet-700">
                    <div
                        class="text-violet-900 dark:text-violet-50 font-medium text-center px-1">
                        {{collect.region}}
                    </div>
                </div>
                }
            </div>
            <div
                class="pl-1 my-2 gap-2 flex flex-col items-start justify-start">
                <span class="text-xs sm:text-md"> Massa: <strong>{{collect.mass}}
                        Kg</strong> </span>
                <span class="text-xs sm:text-md"> Ocorrências: <strong>3</strong></span>
            </div>

            <div
                class="px-0.5 mt-4 gap-2 flex flex-wrap items-start justify-between">
                <span class="text-sm"> {{collect.latitude.toFixed(5)}}</span>
                <span class="text-sm"> {{collect.longitude.toFixed(5)}}</span>
            </div>

            <div
                class="px-0.5 gap-2 flex flex-wrap items-start justify-end">
                <p-button pTooltip="Dados complementares" tooltipPosition="left" (click)="showComplementDialog(collect)"
                    icon="pi pi-search-plus"
                    severity="info" [rounded]="true"
                    [text]="true" />
                <p-button pTooltip="Observações" tooltipPosition="left" (click)="showObservationDialog(collect)"
                    icon="pi pi-eye" severity="warn"
                    [rounded]="true" [text]="true" />
            </div>
        </div>
        }
    </div>
    }

    <app-complement-dialog (updateDataHandler)="updateComplementDataHandler()"
        [isVisible]="complementDialog"
        (dialogClosed)="complementDialog = false" />

    <app-observation-dialog (updateDataHandler)="updateObservationDataHandler()"
        [isVisible]="observationDialog"
        (dialogClosed)="observationDialog = false" />

</section>
